{
  "overallStatus": "FAIL",
  "testsPassed": 0,
  "testsFailed": 11,
  "criticalIssues": [
    {
      "type": "AUTHENTICATION_FAILED",
      "message": "Authentication error: Missing GOOGLE_PRIVATE_KEY environment variable",
      "timestamp": "2025-09-12T14:56:38.544Z"
    },
    {
      "type": "STRIPE_WEBHOOK_INTEGRATION_FAILED",
      "message": "Stripe webhook missing Google Sheets integration",
      "timestamp": "2025-09-12T14:56:38.545Z"
    },
    {
      "type": "SECURITY_ASSESSMENT_FAILED",
      "message": "Security score below threshold: 33%",
      "timestamp": "2025-09-12T14:56:38.546Z"
    },
    {
      "type": "MIGRATION_DATA_INTEGRITY_FAILED",
      "message": "Migration compatibility below 90%: 75%",
      "timestamp": "2025-09-12T14:56:38.547Z"
    },
    {
      "type": "CRITICAL_SCENARIOS_FAILED",
      "message": "4 critical scenarios failed",
      "timestamp": "2025-09-12T14:56:38.548Z"
    }
  ],
  "warnings": [],
  "recommendations": [
    "CRITICAL: Address all failed tests before proceeding to Section 4",
    "Review and fix security vulnerabilities if any",
    "Optimize performance where metrics exceed thresholds",
    "Ensure all data migration issues are resolved"
  ],
  "testResults": {
    "environment_configuration": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "configurationValidation is not defined",
      "timestamp": "2025-09-12T14:56:38.543Z"
    },
    "google_sheets_connection": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Missing GOOGLE_PRIVATE_KEY environment variable",
      "timestamp": "2025-09-12T14:56:38.543Z"
    },
    "data_structure_integrity": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Google Sheets service not initialized",
      "timestamp": "2025-09-12T14:56:38.544Z"
    },
    "customer_id_generation": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Google Sheets service not initialized",
      "timestamp": "2025-09-12T14:56:38.544Z"
    },
    "crud_operations": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Google Sheets service not initialized",
      "timestamp": "2025-09-12T14:56:38.544Z"
    },
    "stripe_webhook_integration": {
      "status": "FAIL",
      "processingTime": 1,
      "details": {
        "webhookFileExists": true,
        "googleSheetsIntegrationFound": true,
        "createGoogleSheetsServiceFound": true,
        "googleSheetsImportFound": false,
        "functionAnalysis": [
          {
            "function": "createAirtableRecord",
            "present": true
          },
          {
            "function": "handleCheckoutCompleted",
            "present": true
          },
          {
            "function": "handlePaymentSucceeded",
            "present": true
          },
          {
            "function": "prepareCustomerData",
            "present": true
          }
        ],
        "webhookFileSize": 58255,
        "lastModified": "2025-09-12T14:47:22.434Z"
      }
    },
    "queue_operations": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Google Sheets service not initialized",
      "timestamp": "2025-09-12T14:56:38.545Z"
    },
    "security_assessment": {
      "status": "FAIL",
      "processingTime": 0,
      "details": {
        "securityChecks": {
          "serviceAccountKeySecure": {
            "passed": false,
            "critical": true,
            "issue": "Private key missing"
          },
          "privateKeyHandling": {
            "passed": false,
            "critical": false,
            "issue": "Private key may not handle newlines properly"
          },
          "spreadsheetPermissions": {
            "passed": false,
            "critical": true,
            "issue": "Service not initialized"
          },
          "apiAccessControls": {
            "passed": true,
            "critical": false,
            "issue": null
          },
          "inputSanitization": {
            "passed": false,
            "critical": false,
            "issue": "Input sanitization not clearly implemented"
          },
          "errorHandling": {
            "passed": true,
            "critical": false,
            "issue": null
          }
        },
        "securityScore": 33,
        "passedChecks": 2,
        "totalChecks": 6,
        "criticalSecurityIssues": [
          {
            "check": "serviceAccountKeySecure",
            "issue": "Private key missing"
          },
          {
            "check": "spreadsheetPermissions",
            "issue": "Service not initialized"
          }
        ]
      }
    },
    "performance_reliability": {
      "status": "FAIL",
      "processingTime": 0,
      "error": "Google Sheets service not initialized",
      "timestamp": "2025-09-12T14:56:38.547Z"
    },
    "migration_data_integrity": {
      "status": "FAIL",
      "processingTime": 0,
      "details": {
        "migrationChecks": {
          "interfaceCompatibility": {
            "passed": true,
            "issue": null
          },
          "dataTypeConsistency": {
            "passed": false,
            "issue": "Service not initialized"
          },
          "fieldMappingAccuracy": {
            "passed": true,
            "issue": null
          },
          "backwardCompatibility": {
            "passed": true,
            "issue": null
          }
        },
        "migrationScore": 75,
        "passedChecks": 3,
        "totalChecks": 4,
        "migrationIssues": [
          {
            "check": "dataTypeConsistency",
            "issue": "Service not initialized"
          }
        ]
      }
    },
    "critical_test_scenarios": {
      "status": "FAIL",
      "processingTime": 0,
      "details": {
        "scenarioResults": [
          {
            "name": "stripe_webhook_customer_creation",
            "description": "Simulate Stripe webhook creating customer record",
            "success": false,
            "error": "Cannot read properties of null (reading 'createBusinessSubmission')",
            "executionTime": 0
          },
          {
            "name": "extension_customer_validation",
            "description": "Retrieve customer by ID for extension validation",
            "success": false,
            "error": "No test data available for validation simulation",
            "executionTime": 0
          },
          {
            "name": "customer_status_update",
            "description": "Update customer status during processing",
            "success": false,
            "error": "No test data available for status update simulation",
            "executionTime": 0
          },
          {
            "name": "pending_customers_queue",
            "description": "Query pending customers for queue management",
            "success": false,
            "error": "Cannot read properties of null (reading 'getPendingSubmissions')",
            "executionTime": 0
          }
        ],
        "totalScenarios": 4,
        "successfulScenarios": 0,
        "failedScenarios": 4,
        "successRate": 0
      }
    }
  },
  "performanceMetrics": {},
  "securityAssessment": {
    "securityChecks": {
      "serviceAccountKeySecure": {
        "passed": false,
        "critical": true,
        "issue": "Private key missing"
      },
      "privateKeyHandling": {
        "passed": false,
        "critical": false,
        "issue": "Private key may not handle newlines properly"
      },
      "spreadsheetPermissions": {
        "passed": false,
        "critical": true,
        "issue": "Service not initialized"
      },
      "apiAccessControls": {
        "passed": true,
        "critical": false,
        "issue": null
      },
      "inputSanitization": {
        "passed": false,
        "critical": false,
        "issue": "Input sanitization not clearly implemented"
      },
      "errorHandling": {
        "passed": true,
        "critical": false,
        "issue": null
      }
    },
    "securityScore": 33,
    "passedChecks": 2,
    "totalChecks": 6,
    "criticalSecurityIssues": [
      {
        "check": "serviceAccountKeySecure",
        "issue": "Private key missing"
      },
      {
        "check": "spreadsheetPermissions",
        "issue": "Service not initialized"
      }
    ]
  },
  "migrationVerification": {
    "migrationChecks": {
      "interfaceCompatibility": {
        "passed": true,
        "issue": null
      },
      "dataTypeConsistency": {
        "passed": false,
        "issue": "Service not initialized"
      },
      "fieldMappingAccuracy": {
        "passed": true,
        "issue": null
      },
      "backwardCompatibility": {
        "passed": true,
        "issue": null
      }
    },
    "migrationScore": 75,
    "passedChecks": 3,
    "totalChecks": 4,
    "migrationIssues": [
      {
        "check": "dataTypeConsistency",
        "issue": "Service not initialized"
      }
    ]
  },
  "finalAssessment": {
    "auditId": "google_sheets_audit_1757688998540",
    "timestamp": "2025-09-12T14:56:38.549Z",
    "auditor": "Frank - Database Integrity Specialist",
    "scope": "Section 3 Google Sheets Migration Verification",
    "duration": 7,
    "overallStatus": "FAIL",
    "totalTests": 11,
    "testsPassed": 0,
    "testsFailed": 11,
    "successRate": 0,
    "criticalIssuesCount": 5,
    "warningsCount": 0,
    "recommendationsCount": 0
  }
}