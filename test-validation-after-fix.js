/**\n * JASON - Test Extension Validation After Fix\n * Tests the customer validation API after fixing Google Sheets credentials\n */\n\nconst fetch = require('node-fetch');\n\nconsole.log('üß™ JASON - Testing Extension Validation After Fix...');\nconsole.log('=' .repeat(60));\n\n// Test customer IDs\nconst testCustomers = [\n  'DIR-2025-001234',\n  'TEST-CUSTOMER-123',\n  'DIR-2025-DEMO01'\n];\n\n// Test endpoints\nconst endpoints = [\n  'http://localhost:3000/api/extension/validate',\n  'http://localhost:3000/api/customer/validate',\n  'https://directorybolt.com/api/extension/validate',\n  'https://directorybolt.com/api/customer/validate'\n];\n\nasync function testValidationEndpoint(endpoint, customerId) {\n  try {\n    console.log(`\\nüîç Testing: ${endpoint}`);\n    console.log(`   Customer ID: ${customerId}`);\n    \n    const response = await fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'User-Agent': 'DirectoryBolt-Extension-Test/1.0'\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        extensionVersion: '3.0.1',\n        timestamp: Date.now()\n      })\n    });\n    \n    console.log(`   Status: ${response.status} ${response.statusText}`);\n    \n    const responseText = await response.text();\n    console.log(`   Response: ${responseText.substring(0, 200)}${responseText.length > 200 ? '...' : ''}`);\n    \n    if (response.ok) {\n      try {\n        const data = JSON.parse(responseText);\n        if (data.valid || data.success) {\n          console.log(`   ‚úÖ SUCCESS: Customer validated!`);\n          console.log(`   Customer: ${data.customerName || data.customer?.businessName || 'Unknown'}`);\n          console.log(`   Package: ${data.packageType || data.customer?.packageType || 'Unknown'}`);\n          return true;\n        } else {\n          console.log(`   ‚ùå FAILED: ${data.error || 'Validation failed'}`);\n          if (data.debug) {\n            console.log(`   üîß Debug: ${JSON.stringify(data.debug)}`);\n          }\n          return false;\n        }\n      } catch (e) {\n        console.log(`   ‚ö†Ô∏è  Response not JSON`);\n        return false;\n      }\n    } else {\n      console.log(`   ‚ùå HTTP Error: ${response.status}`);\n      return false;\n    }\n    \n  } catch (error) {\n    console.log(`   üí• Network Error: ${error.message}`);\n    return false;\n  }\n}\n\nasync function runValidationTests() {\n  console.log('\\nüéØ Testing Customer Validation Endpoints...');\n  \n  let successCount = 0;\n  let totalTests = 0;\n  \n  for (const customerId of testCustomers) {\n    console.log(`\\nüìã Testing Customer ID: ${customerId}`);\n    console.log('-'.repeat(50));\n    \n    for (const endpoint of endpoints) {\n      totalTests++;\n      const success = await testValidationEndpoint(endpoint, customerId);\n      if (success) successCount++;\n      \n      // Small delay between requests\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n  }\n  \n  console.log('\\nüìä TEST RESULTS SUMMARY');\n  console.log('=' .repeat(60));\n  console.log(`Total Tests: ${totalTests}`);\n  console.log(`Successful: ${successCount}`);\n  console.log(`Failed: ${totalTests - successCount}`);\n  console.log(`Success Rate: ${Math.round((successCount / totalTests) * 100)}%`);\n  \n  if (successCount > 0) {\n    console.log('\\n‚úÖ VALIDATION IS WORKING!');\n    console.log('   The AutoBolt extension should now be able to validate customers.');\n    console.log('   Test the extension with one of the working customer IDs.');\n  } else {\n    console.log('\\n‚ùå VALIDATION STILL FAILING');\n    console.log('   Need to investigate further:');\n    console.log('   1. Check if Google Sheets credentials are correct');\n    console.log('   2. Verify customer data exists in Google Sheets');\n    console.log('   3. Check API endpoint implementations');\n  }\n  \n  console.log('\\nüéØ EXTENSION TESTING INSTRUCTIONS:');\n  console.log('   1. Load the AutoBolt extension in Chrome');\n  console.log('   2. Click the extension icon');\n  console.log('   3. Enter customer ID: DIR-2025-001234');\n  console.log('   4. Click \"Validate Customer\"');\n  console.log('   5. Should show success instead of \"Validation failed\"');\n}\n\n// Run the tests\nrunValidationTests().catch(console.error);\n"