# üöÄ DirectoryBolt AI Integration Guide\n\n## Overview\n\nDirectoryBolt has been enhanced with comprehensive AI-powered business intelligence capabilities. This document outlines the AI integration, setup requirements, and testing procedures.\n\n## üîß Setup Requirements\n\n### 1. Install Dependencies\n\n```bash\nnpm install\n```\n\n**Critical Dependencies:**\n- `puppeteer-core@^21.0.0` - Website analysis and screenshots\n- `chrome-aws-lambda@^10.1.0` - Serverless Chrome for Puppeteer\n- `openai@^4.0.0` - GPT-4 business intelligence\n- `@anthropic-ai/sdk@^0.30.1` - Claude analysis (optional)\n- `metascraper@^5.34.0` - Website metadata extraction\n- `cheerio@^1.0.0-rc.12` - HTML parsing\n- `node-html-parser@^6.1.0` - Fast HTML parsing\n\n### 2. Environment Configuration\n\nAdd these variables to your `.env.local` file:\n\n```bash\n# AI Integration\nOPENAI_API_KEY=your_openai_api_key_here\nANTHROPIC_API_KEY=your_anthropic_api_key_here  # Optional\n\n# Puppeteer Configuration\nPUPPETEER_EXECUTABLE_PATH=/opt/chrome/chrome\nPUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n```\n\n**Getting API Keys:**\n- OpenAI: https://platform.openai.com/api-keys\n- Anthropic: https://console.anthropic.com/\n\n### 3. Verify Installation\n\n```bash\nnpm run test:ai-integration\n```\n\n## üèóÔ∏è Architecture Overview\n\n### Core AI Services\n\n1. **Enhanced Website Analyzer** (`lib/services/enhanced-website-analyzer.ts`)\n   - Comprehensive website data extraction\n   - Screenshot capture and visual analysis\n   - SEO analysis and content evaluation\n   - Technology stack detection\n   - Social media presence analysis\n\n2. **AI Business Analyzer** (`lib/services/ai-business-analyzer.ts`)\n   - GPT-4 powered business categorization\n   - Industry analysis and market intelligence\n   - Competitive landscape analysis\n   - Revenue projection modeling\n   - Market positioning recommendations\n\n3. **Directory Matcher** (`lib/services/directory-matcher.ts`)\n   - AI-powered directory selection\n   - Success probability scoring\n   - Platform-specific optimization\n   - Tiered directory access management\n\n### API Endpoint\n\n**Endpoint:** `POST /api/analyze`\n\n**Request Body:**\n```json\n{\n  \"url\": \"https://example.com\",\n  \"tier\": \"free|starter|growth|professional|enterprise\",\n  \"userInput\": {\n    \"businessGoals\": [\"Increase visibility\"],\n    \"targetAudience\": \"Small businesses\",\n    \"budget\": 1000,\n    \"timeline\": \"3 months\"\n  }\n}\n```\n\n**Response (Free Tier):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"tier\": \"free\",\n    \"title\": \"Website Analysis Preview\",\n    \"limitedPreview\": true,\n    \"previewDirectories\": [...],\n    \"upgradeMessage\": {...}\n  },\n  \"processingTime\": 1250,\n  \"usage\": { \"tokensUsed\": 0, \"cost\": 0 }\n}\n```\n\n**Response (Paid Tiers):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"profile\": {...},\n    \"industryAnalysis\": {...},\n    \"competitiveAnalysis\": {...},\n    \"directoryOpportunities\": {...},\n    \"marketPositioning\": {...},\n    \"revenueProjections\": {...},\n    \"confidence\": 85,\n    \"qualityScore\": 92\n  },\n  \"processingTime\": 15000,\n  \"usage\": { \"tokensUsed\": 2500, \"cost\": 0.05 }\n}\n```\n\n## üéØ Tiered Analysis System\n\n### Free Tier\n- **Directories:** 5 preview directories\n- **Analysis:** Basic website data only\n- **AI Features:** None\n- **Purpose:** Lead generation and upgrade conversion\n\n### Starter Plan ($149/month)\n- **Directories:** 25 high-authority directories\n- **Analysis:** Standard AI business intelligence\n- **Features:** Screenshots, basic competitor analysis\n- **Target:** Small businesses testing ROI\n\n### Growth Plan ($299/month) - MOST POPULAR\n- **Directories:** 75 directories including premium platforms\n- **Analysis:** Comprehensive AI intelligence\n- **Features:** Full competitor analysis, revenue projections\n- **Target:** Growing businesses scaling marketing\n\n### Professional Plan ($499/month)\n- **Directories:** 150 directories with API access\n- **Analysis:** Enterprise-grade intelligence\n- **Features:** White-label reporting, dedicated support\n- **Target:** Agencies and larger businesses\n\n### Enterprise Plan ($799/month)\n- **Directories:** 500+ complete database\n- **Analysis:** Custom AI models and integrations\n- **Features:** Multi-location, SLA guarantees\n- **Target:** Large enterprises and franchises\n\n## üß™ Testing\n\n### Run Integration Tests\n\n```bash\n# Test all AI services\nnpm run test:ai-integration\n\n# Test individual components\nnode scripts/test-ai-services.js\n```\n\n### Manual API Testing\n\n```bash\n# Start development server\nnpm run dev\n\n# Test free tier\ncurl -X POST http://localhost:3000/api/analyze \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"url\":\"https://example.com\",\"tier\":\"free\"}'\n\n# Test paid tier (requires OpenAI API key)\ncurl -X POST http://localhost:3000/api/analyze \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"url\":\"https://example.com\",\"tier\":\"growth\"}'\n```\n\n### Expected Test Results\n\n‚úÖ **All tests should pass:**\n- Enhanced Website Analyzer\n- AI Business Analyzer (if OpenAI key configured)\n- Directory Matcher\n- API Endpoint\n\n‚ùå **Common Issues:**\n- Missing OpenAI API key\n- Network connectivity problems\n- Puppeteer Chrome executable not found\n- TypeScript compilation errors\n\n## üöÄ Deployment\n\n### Environment Variables for Production\n\n```bash\n# Required for AI features\nOPENAI_API_KEY=sk-...\nANTHROPIC_API_KEY=sk-ant-...\n\n# Puppeteer for serverless\nPUPPETEER_EXECUTABLE_PATH=/opt/chrome/chrome\nPUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n\n# Node.js version\nNODE_VERSION=20.18.1\n```\n\n### Netlify Configuration\n\nUpdate `netlify.toml`:\n\n```toml\n[build.environment]\n  NODE_VERSION = \"20.18.1\"\n  PUPPETEER_SKIP_CHROMIUM_DOWNLOAD = \"true\"\n  PUPPETEER_EXECUTABLE_PATH = \"/opt/chrome/chrome\"\n```\n\n### Performance Considerations\n\n- **AI Analysis Time:** 10-30 seconds for comprehensive analysis\n- **Rate Limiting:** 20 requests per 15 minutes per IP\n- **Cost Management:** ~$0.02-0.10 per analysis depending on depth\n- **Caching:** Results cached for 24 hours per URL\n\n## üîç Monitoring & Debugging\n\n### Logging\n\nAll AI services use structured logging:\n\n```javascript\nimport { logger } from '../lib/utils/logger'\n\nlogger.info('AI analysis started', {\n  metadata: { url, tier, depth }\n})\n```\n\n### Error Handling\n\n- **Graceful Degradation:** Falls back to basic analysis if AI fails\n- **User-Friendly Errors:** Sanitized error messages for users\n- **Detailed Logging:** Full error context for debugging\n\n### Performance Metrics\n\n- Processing time tracking\n- Token usage monitoring\n- Success/failure rates\n- User tier conversion tracking\n\n## üìà Business Intelligence Features\n\n### What the AI Analyzes\n\n1. **Business Categorization**\n   - Primary and secondary categories\n   - Industry vertical identification\n   - Business model analysis\n   - Target market profiling\n\n2. **Competitive Intelligence**\n   - Direct and indirect competitors\n   - Market gaps and opportunities\n   - Competitive advantages\n   - Directory presence analysis\n\n3. **SEO & Content Analysis**\n   - Technical SEO audit\n   - Content quality assessment\n   - Keyword opportunities\n   - Backlink analysis\n\n4. **Directory Optimization**\n   - Success probability scoring\n   - Platform-specific descriptions\n   - Submission strategy planning\n   - ROI projections\n\n5. **Revenue Projections**\n   - Conservative, baseline, and optimistic scenarios\n   - Directory-specific ROI calculations\n   - Payback period analysis\n   - Lifetime value projections\n\n## üéØ Value Proposition\n\n### For $299/month, customers get:\n\n- **$2,000 worth of business analysis** (vs. hiring consultants)\n- **$1,500 worth of directory submissions** (vs. manual work)\n- **$800 worth of SEO optimization** (vs. SEO tools)\n- **Total Value: $4,300** - **93% savings**\n\n### Competitive Advantages\n\n1. **AI-Powered Intelligence** - Not just directory submissions\n2. **Comprehensive Analysis** - Business intelligence platform\n3. **Success Probability Scoring** - Data-driven recommendations\n4. **Platform Optimization** - Tailored for each directory\n5. **Revenue Projections** - ROI-focused approach\n\n## üîß Troubleshooting\n\n### Common Issues\n\n**\"OpenAI API key not configured\"**\n- Add `OPENAI_API_KEY` to `.env.local`\n- Restart development server\n\n**\"Puppeteer executable not found\"**\n- Install Chrome/Chromium locally\n- Set `PUPPETEER_EXECUTABLE_PATH`\n\n**\"Analysis timeout\"**\n- Check internet connection\n- Verify target URL is accessible\n- Increase timeout in configuration\n\n**\"TypeScript compilation errors\"**\n- Run `npm run type-check`\n- Check import paths and type definitions\n\n### Support\n\nFor technical issues:\n1. Check the test results: `npm run test:ai-integration`\n2. Review logs in development console\n3. Verify environment configuration\n4. Test with a simple URL like `https://example.com`\n\n---\n\n## üéâ Success Criteria\n\nPhase 1 is complete when:\n- ‚úÖ All AI services are functional\n- ‚úÖ API endpoint returns proper tiered responses\n- ‚úÖ Free tier generates leads with upgrade prompts\n- ‚úÖ Paid tiers deliver comprehensive business intelligence\n- ‚úÖ Integration tests pass consistently\n- ‚úÖ Error handling works gracefully\n\n**Ready for Phase 2: Pricing Optimization & Value Positioning**"